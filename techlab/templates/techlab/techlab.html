{% extends 'viewer/viewer_layout.html' %}
{% load static %}

{% block extra_styles %}
<link rel="stylesheet" href="{% static 'techlab/css/style.css' %}">
{% endblock %}

{% block title %}Выгрузка данных ТЛ{% endblock %}

{% block content %}
<div class="container">
    <h2>Формирование отчёта</h2>
    <form method="post">
        {% csrf_token %}

        <!-- Даты + шаблоны -->
        <div class="row">
            <div class="column">
                <!-- Выпадающий список шаблонов -->
                <label for="template-select">Тип выгрузки</label>
                <select id="select-type" class="custom-select">
                    <option value="">Выберите шаблон</option>
                    <option value="day">Ежесуточная</option>
                    <option value="month">Ежемесячная</option>
                    <option value="years">Ежегодовая</option>
                </select>
            </div>

            <div class="column">
                <!-- Выпадающий список шаблонов -->
                <label for="template-select">Шаблоны</label>
                <select id="template-select" class="custom-select">
                    <option value="">Выберите шаблон</option>
                    <option value="thermohydrolysis">Термогидролиз</option>
                    <option value="mgso4">Сульфат магния</option>
                    <option value="p-p">Предгидролизный р-р</option>
                    <option value="acid">Кислые р-ры</option>
                    <option value="reactor5">5 реактор</option>
                </select>
            </div>

            <div class="column">
                <label for="id_date_from">Дата с</label>
                {{ form.date_from }}
            </div>

            <div class="column">
                <label for="id_date_to">Дата по</label>
                {{ form.date_to }}
            </div>
        </div>

        <!-- Блоки с чекбоксами для каждой точки отбора -->
        <div class="indicator-groups-container">
            <div class="indicator-groups-row">
                {% for field in form %}
                    {% if "indicators_point_" in field.name %}
                        <div class="indicator-group">
                            <h3>{{ field.label }}</h3>
                            <div class="indicator-grid">
                                {% for checkbox in field %}
                                    <div class="indicator-item">
                                        {{ checkbox.tag }}
                                        <label for="{{ checkbox.id_for_label }}">{{ checkbox.choice_label }}</label>
                                    </div>
                                {% endfor %}
                            </div>
                        </div>
                    {% endif %}
                {% endfor %}
            </div>
        </div>

        <!-- Кнопки -->
        <div class="buttons">
            <button id="clear-all-btn" class="btn" type="button">Очистить всё</button>
            <button class="btn" type="submit">Сформировать</button>
        </div>
    </form>
</div>

{% block extra_scripts %}
<script src="{% static 'techlab/js/techlab.js' %}"></script>
{% endblock %}
{% endblock %}
